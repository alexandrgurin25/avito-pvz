# Avito Shop

**Avito Shop** — это сервис, разработанный в рамках [тестового задания](https://github.com/avito-tech/tech-internship/blob/main/Tech%20Internships/Backend/Backend-trainee-assignment-spring-2025/Backend-trainee-assignment-spring-2025.md) для стажировки по Backend-направлению в компании Авито. Сервис предназначен для пунктов выдачи заказов (ПВЗ) Авито. Он помогает управлять процессом приемки товаров, созданием ПВЗ и отслеживанием информации о товарах.

# Технические детали

## Стек технологий
- **Язык программирования:** Go
- **База данных:** PostgreSQL
- **Docker:** Используется для контейнеризации приложения
- **Postman:** Используется для проверки запросов
- **Migrate:** Для управления миграциями базы данных.
- **JWT:** Для аутентификации и авторизации.
- **Zap:** Логирование.
- **Chi:** Роутер для HTTP сервера.
- **Cleanenv:** Для работы с переменными окружения.
- **gomock:** Для мокирования в тестах.
- **BCrypt:** Для хеширования паролей.

## Эндпоинты
- `POST /dummyLogin`: Получение токена для авторизации.
- `POST /register`: Регистрация нового пользователя.
- `POST /login`: Авторизация пользователя.
- `POST /pvz`: Создание нового ПВЗ (только для модераторов).
- `POST /receptions`: Инициация приемки товаров.
- `POST /products`: Добавление товаров к приемке.
- `POST /pvz/{pvzId}/delete_last_product`: Удаление последнего товара из приемки.
- `/pvz/{pvzId}/close_last_reception`: Закрытие приемки.
- `GET /pvz`: Получение списка ПВЗ с пагинацией и фильтрацией.

## Схема базы данных
![image](https://github.com/user-attachments/assets/67dab7b6-dea1-4a59-95eb-c75e770b71b8)

# Установка и запуск

1. **Клонирование репозитория**:

   ```bash
   git clone https://github.com/alexandrgurin25/avito-shop.git
   cd avito-shop

2. **Конфигурация**
В проекте реализованы `env` переменные. Для их использования нужно выполнить одну из следующих команд:

- Выполнить команду:
   ```bash
   make env
   ```
  Либо: 
  ```
  cp config/example.env.md config/.env
  cp config/example.env.test.md config/test.env
  ```
3. **Запуск с использованием Docker Compose**:
   ```bash
   docker-compose up
   ```
4. **Узнать все о покрытии тестами, можно использовать команду:**
   ```bash
   make cover
   ```
**Пояснение**
- В проекте было принято решение часть данных кешировать в памяти (in-memory caching) . Во-первых, объем данных, которые мы храним в кеше, относительно небольшой, что делает использование in-memory кеша более эффективным и простым решением.

- Во-вторых, реализация Redis или другого внешнего кеша потребовала бы дополнительных усилий по настройке и поддержке, что не оправдано в нашем случае из-за небольшого объема данных. Использование in-memory кеша позволяет нам сосредоточиться на разработке функциональности проекта, не отвлекаясь на управление дополнительной инфраструктурой.
   
